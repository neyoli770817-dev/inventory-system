<!DOCTYPE html>
<html lang="zh-TW">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
Â  Â  <title>å…«æ¯…åº«å­˜ç®¡ç† 4.0 - å…è²»ç‰ˆ</title>
Â  Â  <link rel="apple-touch-icon"href="https://i.postimg.cc/XNCSk29x/å…«æ¯…LOGO.jpg">
Â  Â  <link rel="manifest" href="manifest.json">
Â  Â Â 
<meta name="mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#4A0404">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="å…«æ¯…åº«å­˜">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="å…«æ¯…åº«å­˜">
Â  Â Â 
Â  Â  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
Â  Â  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
Â  Â  <style>
Â  Â  Â  Â  :root { --bg-wine: #4A0404; --btn-white: #FFFFFF; --text-dark: #333; }
Â  Â  Â  Â  body { font-family: -apple-system, sans-serif; background-color: var(--bg-wine); color: white; margin: 0; padding: 10px; }
Â  Â  Â  Â  .page { display: none; padding-bottom: 50px; } .page.active { display: block; }
Â  Â  Â  Â  .header { text-align: center; padding: 15px 0; background: var(--bg-wine); position: sticky; top: 0; z-index: 100; }
Â  Â  Â  Â  .form-container { max-width: 500px; margin: 0 auto 15px auto; background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; }
Â  Â  Â  Â  .form-group { margin-bottom: 10px; }
Â  Â  Â  Â  .form-group label { display: block; margin-bottom: 5px; font-size: 14px; }
Â  Â  Â  Â  .form-control { width: 100%; padding: 10px; border-radius: 8px; border: none; font-size: 16px; box-sizing: border-box; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* ç•™è¨€å€å¡Šæ¨£å¼ */
Â  Â  Â  Â  .note-section { max-width: 500px; margin: 0 auto 20px auto; background: #2196F3; padding: 15px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
Â  Â  Â  Â  .note-input { width: 100%; padding: 12px; border-radius: 8px; border: none; font-size: 16px; box-sizing: border-box; margin-bottom: 10px; }
Â  Â  Â  Â  .send-note-btn { width: 100%; background: #FFFFFF; color: #2196F3; border: none; padding: 10px; border-radius: 8px; font-weight: bold; font-size: 16px; cursor: pointer; }
Â  Â  Â  Â  .send-note-btn:active { background: #e0e0e0; }

Â  Â  Â  Â  .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; max-width: 500px; margin: 0 auto; }
Â  Â  Â  Â  .menu-item { background: var(--btn-white); aspect-ratio: 1/1; border-radius: 15px; display: flex; flex-direction: column; justify-content: center; align-items: center; cursor: pointer; }
Â  Â  Â  Â  .menu-item span { color: var(--text-dark); font-weight: bold; font-size: 18px; margin-top: 10px; }
Â  Â  Â  Â  .item-card { background: white; color: var(--text-dark); border-radius: 12px; padding: 15px; margin-bottom: 10px; }
Â  Â  Â  Â  .qty-input-group { display: flex; align-items: center; gap: 10px; border-top: 1px solid #eee; padding-top: 10px; }
Â  Â  Â  Â  .input-num { width: 80px; padding: 8px; border: 1px solid #ccc; border-radius: 5px; text-align: center; font-size: 18px; }
Â  Â  Â  Â  .submit-btn { flex: 1; background: #4CAF50; color: white; border: none; padding: 10px; border-radius: 5px; font-weight: bold; cursor: pointer; }
Â  Â  Â  Â  .back-btn { background: none; border: 1px solid white; color: white; padding: 8px 12px; margin-bottom: 10px; border-radius: 5px; cursor: pointer; }
Â  Â  Â  Â  .truss-icon { width: 70px; height: auto; }
Â  Â  Â  Â  .summary-item { border-bottom: 1px solid rgba(255,255,255,0.2); padding: 10px; display: flex; justify-content: space-between; }
Â  Â  </style>
</head>
<body>

Â  Â  <div id="homePage" class="page active">
Â  Â  Â  Â  <div class="header"><h1>å…«æ¯…åº«å­˜ç®¡ç†</h1></div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="form-container">
Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  <label>å“¡å·¥å§“å</label>
Â  Â  Â  Â  Â  Â  Â  Â  <select id="userName" class="form-control">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">è«‹é¸æ“‡äººå“¡...</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>é‚±æ­£è±ª</option><option>é‚±å®¥ç‘‹</option><option>å»–æ†å…‰</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>æ—ç¿</option><option>è‘£å¤èˆœ</option><option>é»å…‰åº­</option>
Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  <label>æ—¥æœŸ</label>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="date" id="actionDate" class="form-control">
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  <label>ç›®çš„</label>
Â  Â  Â  Â  Â  Â  Â  Â  <select id="actionPurpose" class="form-control">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>å–ç”¨</option><option>å€Ÿç”¨</option><option>æ­¸é‚„</option>
Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="note-section" style="background: #333;">
Â  Â  Â  Â  Â  Â  <div style="font-weight: bold; margin-bottom: 8px; text-align: center; color: white;">ğŸ’¬ å¿«é€Ÿäº¤ä»£äº‹é …</div>
Â  Â  Â  Â  Â  Â  <input type="text" id="noteInput" class="note-input" placeholder="æ‰“å­—ç•™è¨€...">
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div style="display: flex; gap: 10px;">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="send-note-btn" style="flex: 2; background: #2196F3; color: white;" onclick="sendNote()">é€å‡ºæ–‡å­—</button>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <button class="send-note-btn" style="flex: 1; background: #06C755; color: white;"Â 
Â  Â  onclick="goToLine()">
Â  Â  ğŸ¤ èªéŸ³
</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="menu-grid">
Â  Â  Â  Â  Â  Â  <div class="menu-item" onclick="openCategory('truss')">
Â  Â  Â  Â  Â  Â  Â  Â  <img src="https://i.postimg.cc/GtDsw45n/OIP.png" class="truss-icon"><span>Trussé¡</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="menu-item" onclick="openCategory('tent')">
Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-size:50px">â›º</div><span>å¸³ç¯·é¡</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="menu-item" onclick="showSummary()">
Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-size:50px">ğŸ“Š</div><span>å³æ™‚åº«å­˜çœ‹</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="menu-item" onclick="alert('å°šæœªåˆ†é¡')">
Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-size:50px">ğŸ“¦</div><span>å…¶å®ƒ</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div id="listPage" class="page">
Â  Â  Â  Â  <div class="header">
Â  Â  Â  Â  Â  Â  <button class="back-btn" onclick="showPage('homePage')">â† è¿”å›</button>
Â  Â  Â  Â  Â  Â  <h2 id="categoryTitle" style="color:white; margin:0;"></h2>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div id="itemContainer" style="max-width:600px; margin:0 auto;"></div>
Â  Â  </div>

Â  Â  <div id="summaryPage" class="page">
Â  Â  Â  Â  <div class="header">
Â  Â  Â  Â  Â  Â  <button class="back-btn" onclick="showPage('homePage')">â† è¿”å›</button>
Â  Â  Â  Â  Â  Â  <h1>å³æ™‚åº«å­˜ç¸½é‡</h1>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div id="summaryContainer" style="max-width:600px; margin:0 auto; background: rgba(0,0,0,0.2); border-radius: 10px; padding: 10px;"></div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â const firebaseConfig = {
Â  Â  apiKey: "AIzaSyBNiATgf4yVR5qZ5CEmGClfm22yjq2fBlI",
Â  Â  authDomain: "bayi-inventory.firebaseapp.com",
Â  Â  projectId: "bayi-inventory",
Â  Â  // 1. å‹™å¿…ç¢ºä¿æ˜¯é€™å€‹ç¾åœ‹ä¼ºæœå™¨ç¶²å€ï¼Œä¸è¦åŠ  /inventory.json
Â  Â  databaseURL: "https://bayi-inventory-default-rtdb.firebaseio.com",Â 
Â  Â  storageBucket: "bayi-inventory.firebasestorage.app",
Â  Â  messagingSenderId: "494997600674",
Â  Â  appId: "1:494997600674:web:711588fab8d8ae70eb5afb"
};
Â  Â  Â  Â  firebase.initializeApp(firebaseConfig);
Â  Â  Â  Â  const db = firebase.database();
Â  Â  Â  Â  document.getElementById('actionDate').valueAsDate = new Date();

Â  Â  Â  Â  // --- ç•™è¨€åŠŸèƒ½ ---
Â  Â  Â  Â  function sendNote() {
Â  Â  Â  Â  Â  Â  const user = document.getElementById('userName').value;
Â  Â  Â  Â  Â  Â  const note = document.getElementById('noteInput').value;
Â  Â  Â  Â  Â  Â  if (!user) return alert('è«‹å…ˆé¸æ“‡äººå“¡ï¼');
Â  Â  Â  Â  Â  Â  if (!note) return alert('è«‹è¼¸å…¥ç•™è¨€å…§å®¹ï¼');

Â  Â  Â  Â  Â  Â  db.ref('voice_messages').push({
Â  Â  Â  Â  Â  Â  Â  Â  user: user,
Â  Â  Â  Â  Â  Â  Â  Â  message: note,
Â  Â  Â  Â  Â  Â  Â  Â  time: new Date().toLocaleString()
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  document.getElementById('noteInput').value = '';
Â  Â  Â  Â  Â  Â  alert('ç•™è¨€å·²é€å‡ºï¼');
Â  Â  Â  Â  }

Â  Â  Â  Â  function goToLine() {
Â  Â  const user = document.getElementById('userName').value;
Â  Â  if (!user) {
Â  Â  Â  Â  alert('è«‹å…ˆé¸æ“‡å“¡å·¥å§“åï¼Œå†é»æ“ŠèªéŸ³ç•™è¨€ï¼');
Â  Â  Â  Â  return;
Â  Â  }
Â  Â  // ç¢ºèªæœ‰é¸åå­—å¾Œï¼Œæ‰è·³è½‰åˆ° LINE
Â  Â  window.location.href = 'https://line.me/ti/p/~noc770817';
}

Â  Â  Â  Â  // --- åº«å­˜èˆ‡é é¢é‚è¼¯ä¿æŒä¸è®Š ---
Â  Â  Â  Â  const allItems = ["3ç±³Truss", "2ç±³Truss", "1ç±³Truss", "60Truss", "50Truss", "40Truss", "30Truss", "25Truss", "20Truss", "15Truss", "10Truss", "è½‰æ¥é ­", "10Â°ä¸€é«”è½‰æ¥é ­", "15Â°è½‰æ¥é ­", "10Â°è½‰æ¥é ­", "Cå¤¾", "Trusséµæ¿", "3ç±³Trusså¾Œæ’", "2ç±³Trusså¾Œæ’", "70Trusså´æ‹‰", "50Trusså´æ‹‰", "6x6èˆå°æ¿", "3x6èˆå°æ¿", "Layheræ¿", "é›»é¢¨æ‰‡", "åŠæ‰‡", "ä¸‰æ­¥æ¢¯", "ä¸€æ­¥æ¢¯", "åƒåœ¾æ¶", "å¢Šç®±", "12å‘é¦¬æ¤…", "10å‘é¦¬æ¤…", "9å‘é¦¬æ¤…", "8å°ºé¦¬æ¤…", "6å‘é¦¬æ¤…", "5å‘é¦¬æ¤…", "3å‘é¦¬æ¤…", "æ¡Œè»Š", "æ¤…è»Š", "é»‘æ¡Œå·¾", "æ¡Œå·¾", "æœƒè­°æ¡Œæ¡Œå·¾(ç´…å¸ƒ145*270)", "æ¤…å¥—", "èˆå°é»‘åœ 15m*90", "èˆå°é»‘åœ 15m*150", "èˆå°é»‘åœ 120m*150", "3ç±³å¿«é€Ÿå¸³(ç´…ç™½)", "3ç±³å¿«é€Ÿå¸³(ç™½)", "3ç±³åœå¸ƒ(ç™½)", "3ç±³åœå¸ƒ(å¤§ç´…)", "3ç±³é ‚ç¯·(ç´…)", "éª¨æ¶300*300", "3ç±³ç‡ˆ", "3ç±³æ°´æº", "å±‹å‹å¸³(ç´…)", "éª¨æ¶300*600", "6ç±³é ‚ç¯·(ç™½)", "6ç±³é ‚ç¯·(ç´…ç™½)", "6ç±³é ‚ç¯·(ç´…)", "6ç±³é ‚ç¯·(é€æ˜)", "éª¨æ¶600*600", "6ç±³æ°´æºå¸ƒ", "6ç±³åœå¸ƒ(ç™½)", "6ç±³é‚Š", "6ç±³è…³", "6ç±³é›çˆª", "6ç±³å¸³ç¯·ç‡ˆ", "ç‡Ÿé‡˜", "12å‘æ‹±", "15å‘æ‹±", "20å‘æ‹±", "24å‘æ‹±", "30å‘æ‹±", "15å‘é ­åœ", "15å‘é ­åœ(ç´…)", "20å‘é ­åœ", "20å‘é ­åœ(ç´…)", "24å‘é ­åœ", "24å‘é ­åœ(ç´…)", "30å‘é ­åœ", "åœ“æ‹±åœå¸ƒ(ç´…)", "12å‘é ‚æ£š(ç™½)", "12å‘é ‚æ£š(ç´…ç™½)", "15å‘é ‚æ£š(ç™½)", "15å‘é ‚æ£š(ç´…ç™½)", "20å‘é ‚æ£š(ç™½)", "20å‘é ‚æ£š(ç´…ç™½)", "24å‘é ‚æ£š(ç™½)", "24å‘é ‚æ£š(ç´…ç™½)", "30å‘é ‚æ£š(ç™½)", "30å‘é ‚æ£š(ç´…ç™½)", "æœƒè­°æ¡Œ", "é»‘é‡‘å‰›", "é»å¿ƒæ¤…", "ç´…é¾", "ä¸‰è§’éŒ", "ä¸‰è§’éŒé€£æ¡¿", "æ²™åŒ…"];
Â  Â  Â  Â  const categories = { truss: allItems.filter(n => n.toLowerCase().includes('truss')), tent: allItems.filter(n => !n.toLowerCase().includes('truss')) };

Â  Â  Â  Â  function showPage(id) { document.querySelectorAll('.page').forEach(p => p.classList.remove('active')); document.getElementById(id).classList.add('active'); }
Â  Â  Â  Â Â 
Â  Â  Â  Â  function openCategory(cat) {
Â  Â  Â  Â  Â  Â  document.getElementById('categoryTitle').innerText = (cat === 'truss' ? 'ğŸ—ï¸ Trussé¡' : 'â›º å¸³ç¯·é¡');
Â  Â  Â  Â  Â  Â  const container = document.getElementById('itemContainer');
Â  Â  Â  Â  Â  Â  container.innerHTML = '';
Â  Â  Â  Â  Â  Â  categories[cat].forEach(name => {
Â  Â  Â  Â  Â  Â  Â  Â  const card = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  card.className = 'item-card';
Â  Â  Â  Â  Â  Â  Â  Â  card.innerHTML = `<div style="display:flex; justify-content:space-between; color:#333"><b>${name}</b><span id="qty-${name}" style="font-weight:bold; color:#2196F3">0</span></div><div class="qty-input-group"><input type="number" id="input-${name}" class="input-num" placeholder="0"><button class="submit-btn" onclick="submitChange('${name}')">ç¢ºèªé€å‡º</button></div>`;
Â  Â  Â  Â  Â  Â  Â  Â  container.appendChild(card);
Â  Â  Â  Â  Â  Â  Â  Â  db.ref('inventory/' + name).on('value', s => {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const target = document.getElementById(`qty-${name}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (target) target.innerText = s.val() || 0;Â 
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  showPage('listPage');
Â  Â  Â  Â  }

Â  Â  Â  Â  function submitChange(name) {
Â  Â  Â  Â  Â  Â  const user = document.getElementById('userName').value;
Â  Â  Â  Â  Â  Â  const purpose = document.getElementById('actionPurpose').value;
Â  Â  Â  Â  Â  Â  const val = parseInt(document.getElementById('input-' + name).value);
Â  Â  Â  Â  Â  Â  if (!user || isNaN(val)) return alert('è«‹é¸æ“‡å§“åä¸¦è¼¸å…¥æ•¸é‡');
Â  Â  Â  Â  Â  Â  let delta = (purpose === 'æ­¸é‚„') ? Math.abs(val) : -Math.abs(val);
Â  Â  Â  Â  Â  Â  db.ref('inventory/' + name).transaction(c => (c || 0) + delta);
Â  Â  Â  Â  Â  Â  db.ref('logs').push({ user, name, val, purpose, time: new Date().toLocaleString() });
Â  Â  Â  Â  Â  Â  document.getElementById('input-' + name).value = '';
Â  Â  Â  Â  Â  Â  alert('ç´€éŒ„æˆåŠŸ');
Â  Â  Â  Â  }

Â  Â  Â  Â  function showSummary() {
Â  Â  Â  Â  Â  Â  const container = document.getElementById('summaryContainer');
Â  Â  Â  Â  Â  Â  container.innerHTML = 'è¼‰å…¥ä¸­...';
Â  Â  Â  Â  Â  Â  db.ref('inventory').once('value', snap => {
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = '';
Â  Â  Â  Â  Â  Â  Â  Â  const items = snap.val() || {};
Â  Â  Â  Â  Â  Â  Â  Â  Object.keys(items).sort().forEach(name => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(items[name] !== 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const row = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  row.className = 'summary-item';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  row.innerHTML = `<span>${name}</span><b>${items[name]}</b>`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  container.appendChild(row);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  showPage('summaryPage');
Â  Â  Â  Â  }
Â  Â  </script>
</body>
</html>
